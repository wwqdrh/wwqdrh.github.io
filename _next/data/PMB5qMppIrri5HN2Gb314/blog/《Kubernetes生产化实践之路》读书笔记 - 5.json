{"pageProps":{"post":{"mdxSource":"<h1>应用落地</h1>\n<p>微服务架构下的十二条最佳实践指导原则</p>\n<ul>\n<li>基础代码: 一份代码多份部署</li>\n<li>依赖管理: 明确定义项目依赖</li>\n<li>配置: 以配置文件或环境变量的方式注入应用中</li>\n<li>后台服务: 无状态应用更易管理，需要与有状态服务进行隔离</li>\n<li>进程管理: 进程应该是无状态的，任何数据都不应该做本地持久化</li>\n<li>端口绑定: 以端口绑定的形式发布服务，容器进程运行在不同的网络命名空间，彼此隔离</li>\n<li>并发: 应用可以按需伸缩</li>\n<li>易管理: 快速启动时保证应用灵活部署的前提条件</li>\n<li>研发生产环境的一致性</li>\n<li>日志</li>\n<li>管理进程</li>\n</ul>\n<p>Dockerfile的编写要考虑分层的复用、缓存的清理，或者使用多阶段构建(多个from)，最终镜像只会留下所需要的内容</p>\n<p>对于容器多进程场景下容器的主进程选择，主流方案Systemd、Supervisior等，要能够负责业务进程的启动，接管孤儿进程回收僵尸进程，支持SIGTERM信号的处理，向子进程传播SIGTERM信号，优雅地结束所有子进程后退出。</p>\n<h1>监控和自动修复</h1>\n<p>基础平台服务的监控，实时监控核心组件(API Server、调度器、控制器、kubelet和kube-proxy等)的健康状态、用以发现用户流量好组件CPU、内存、网络的使用情况</p>\n<p>监控系统的数据分为两大类，指标和日志</p>\n<p>指标监控系统</p>\n<ul>\n<li>Heapster + InfluxDB + Grafana</li>\n<li>Metrics-server + InfluxDB + Grafana</li>\n<li>各种Exporter + Prometheus + Grafana + Alertmanager</li>\n</ul>\n<p>日志系统</p>\n<ul>\n<li>Filebeats + Logstash + Elastic + Kibana: ELK套件</li>\n<li>Fluentd + Fluentd Aggregator + Influxdb + Grafana</li>\n</ul>\n<p>服务的关键性指标</p>\n<ul>\n<li>SLA: 服务级别协议</li>\n<li>SLI: 服务水平指标</li>\n<li>SLO: 服务水平目标</li>\n</ul>\n<h1>DevOps</h1>\n<p>一个中心，两个基本点，以业务敏捷为中心，构造适应快速发布软件的工具和文化。透过自动化透明的&quot;软件交付&quot;和&quot;系统变更&quot;的流程，构建、测试、发布系统应用能够更加快捷、可靠。</p>\n<p>GitOps使得整个交付系统以声明式方式进行描述，使用版本控制系统(Git)作为唯一的部署来源，其内包含应用部署于Kubernetes的所有信息。</p>\n<p>5%的时间用于编码，95%的时间用于测试: 不可测试和没有经过测试的代码是不能交付的</p>\n<p>测试需要贯穿始终</p>\n","frontMatter":{"readingTime":{"text":"4 min read","minutes":3.545,"time":212700,"words":709},"slug":"《Kubernetes生产化实践之路》读书笔记 - 5","fileName":"《Kubernetes生产化实践之路》读书笔记 - 5.md","title":"Kubernetes生产化实践之路5","date":"2022-08-12T00:00:00.000Z","tags":["读书笔记"],"draft":false,"summary":"Kubernetes生产化实践之路-第10-11-12章"}},"prev":{"title":"Kubernetes生产化实践之路3","date":"2022-08-11T00:00:00.000Z","tags":["读书笔记"],"draft":false,"summary":"Kubernetes生产化实践之路-第6-7章","slug":"《Kubernetes生产化实践之路》读书笔记 - 3"},"next":{"title":"Kubernetes生产化实践之路4","date":"2022-08-12T00:00:00.000Z","tags":["读书笔记"],"draft":false,"summary":"Kubernetes生产化实践之路-第8-9章","slug":"《Kubernetes生产化实践之路》读书笔记 - 4"}},"__N_SSG":true}