{"pageProps":{"post":{"mdxSource":"<h1>node</h1>\n<p>n个manager由内置的raft协议数据库组成分布式集群，管理m个worker节点</p>\n<p>n个manager最多容忍<code>(n-1)/2</code>个节点down</p>\n<p>master</p>\n<ul>\n<li>集群状态管理</li>\n<li>服务调度</li>\n<li>api endpoint</li>\n</ul>\n<p>worker节点唯一的工作内容就是执行容器</p>\n<ul>\n<li>worker -&gt; manager: <code>docker node promote</code></li>\n<li>manager -&gt; worker: <code>docker node demote</code></li>\n</ul>\n<h1>service</h1>\n<blockquote>\n<p>service -&gt; container -&gt; task</p>\n</blockquote>\n<img src=\"/images/blogs/swarmtask.png\" />\n\n<p>service类型</p>\n<ul>\n<li>Replicated: 服务多副本</li>\n<li>Global: 每个node都会都要执行的</li>\n</ul>\n<h1>service创建流程</h1>\n<img src=\"/images/blogs/service创建流程.png\" />","frontMatter":{"readingTime":{"text":"1 min read","minutes":0.705,"time":42300,"words":141},"slug":"swarm工作模式","fileName":"swarm工作模式.md","title":"docker-swarm的工作原理","date":"2022-10-26T00:00:00.000Z","tags":["云原生"],"draft":false,"summary":"docker-swarm的工作原理"}},"prev":{"title":"容器的操作指南","date":"2022-10-17T00:00:00.000Z","tags":["容器"],"draft":false,"summary":"容器的操作指南","slug":"容器操作指南"},"next":{"title":"内存限制实战","date":"2022-10-30T00:00:00.000Z","tags":["实践"],"draft":false,"summary":"cgroup-内存限制实践","slug":"内存限制实践"}},"__N_SSG":true}