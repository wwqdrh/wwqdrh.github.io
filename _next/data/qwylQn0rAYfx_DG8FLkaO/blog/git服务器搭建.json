{"pageProps":{"post":{"mdxSource":"<p>添加用户组</p>\n<pre><code class=\"hljs language-bash\">groupadd git\n\nuseradd git -g git <span class=\"hljs-comment\"># 使用adduser比较好，简单一点</span>\n\nmkdir /home/git <span class=\"hljs-comment\"># 使用useradd创建用户需要自己创建工作目录</span>\n\n<span class=\"hljs-comment\"># 这里之前用成了root，需要修改所有者</span>\nchown -R git:git /home/git\n</code></pre><p>创建证书登录</p>\n<p>收集所有需要登录服务器的本地用户公钥，公钥位于id_rsa.pub文件中，把我们的公钥导入到/home/git/.ssh/authorized_keys文件里，一行一个。</p>\n<pre><code class=\"hljs language-bash\">su git\n\ncd /home/git/\n\nmkdir .ssh\n\nchmod <span class=\"hljs-number\">755</span> .ssh\n\ntouch .ssh/authorized_keys\n\nchmod <span class=\"hljs-number\">644</span> .ssh/authorized_keys\n\nvim .ssh/authorized_keys <span class=\"hljs-comment\"># 将自己电脑上的公钥添加进去</span>\n</code></pre><p>出于安全考虑，第二步创建的git用户不允许登录shell，这可以通过编辑/etc/passwd文件完成</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># /etc/passwd</span>\n\ngit:x:<span class=\"hljs-number\">1004</span>:<span class=\"hljs-number\">1004</span>::/home/git:/<span class=\"hljs-built_in\">bin</span>/bash\n\n<span class=\"hljs-comment\"># 修改</span>\n\ngit:x:<span class=\"hljs-number\">1004</span>:<span class=\"hljs-number\">1004</span>::/home/git:/usr/<span class=\"hljs-built_in\">bin</span>/git-shell\n</code></pre><pre><code class=\"hljs language-bash\"><span class=\"hljs-comment\"># 在服务器上创建裸仓库</span>\n\nmkdir project\n\ncd project\n\ngit init --bare specs.git\n\n<span class=\"hljs-comment\"># 设置好用户和用户组，避免没有权限</span>\nchown -R git:git specs.git\n\n<span class=\"hljs-comment\"># 将本地仓库上传到远程</span>\ngit remote add origin ssh://git@<span class=\"hljs-number\">43.142</span><span class=\"hljs-number\">.26</span><span class=\"hljs-number\">.74</span>:<span class=\"hljs-number\">22</span>/home/git/project/specs.git\n</code></pre>","frontMatter":{"readingTime":{"text":"2 min read","minutes":1.395,"time":83700,"words":279},"slug":"git服务器搭建","fileName":"git服务器搭建.md","title":"git环境搭建","date":"2022-10-08T00:00:00.000Z","tags":["实践"],"draft":false,"summary":"私人git服务搭建"}},"prev":{"title":"nginx网关的常用配置","date":"2022-10-08T00:00:00.000Z","tags":["实践"],"draft":false,"summary":"nginx网关的常用配置","slug":"nginx网关配置"},"next":{"title":"表达时间的格式","date":"2022-10-10T00:00:00.000Z","tags":["操作系统"],"draft":false,"summary":"表达时间的格式","slug":"时间格式"}},"__N_SSG":true}