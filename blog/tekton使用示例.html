<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"/><title>tekton使用示例</title><meta name="robots" content="follow, index"/><meta charSet="UTF-8"/><meta name="description" content="tekton作为云原生中的cd工具，能够轻易的做到task复用，减少重复代码编写"/><meta property="og:type"/><meta property="og:title" content="tekton使用示例"/><meta property="og:description" content="tekton作为云原生中的cd工具，能够轻易的做到task复用，减少重复代码编写"/><meta property="og:url" content="https://wwqdrh.github.io/undefined"/><meta name="keywords" content="wwqdrh技术博客"/><meta property="og:locale" content="zh-CN"/><meta property="og:image" content="https://wwqdrh.github.io"/><meta name="twitter:title" content="tekton使用示例"/><meta name="twitter:description" content="tekton作为云原生中的cd工具，能够轻易的做到task复用，减少重复代码编写"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://wwqdrh.github.io"/><link rel="stylesheet" href="/assets/mdrender/editor-render.css"/><meta name="next-head-count" content="17"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" sizes="192x192" href="/apple-touch-icon.png"/><link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/feed"/><script src="/assets/analizy/clarity.js"></script><link rel="preload" href="/_next/static/media/d83e92f0af8b17e4-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/e52907b750a6f61e-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/ed42d1b51efd45f6-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/9031250013752d4b-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/fba9d678ff638e59-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/eb9adf802b0a60eb-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/81b352a4d7a000ae-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/41b9b3ece820718f-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/d587d1c112526568-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/869c7de7c781f904.css" as="style"/><link rel="stylesheet" href="/_next/static/css/869c7de7c781f904.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-6ef43a8d4a395f49.js" defer=""></script><script src="/_next/static/chunks/framework-fbe37f60a09a330b.js" defer=""></script><script src="/_next/static/chunks/main-082d90b1269d95f6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ebc472ae118a2be0.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-222bf60d0a2bf3df.js" defer=""></script><script src="/_next/static/qwylQn0rAYfx_DG8FLkaO/_buildManifest.js" defer=""></script><script src="/_next/static/qwylQn0rAYfx_DG8FLkaO/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global c86wz">body{margin:0;padding:0;color:hsl(0, 0%, 9.0%);background-color:hsl(0, 0%, 97.3%);font-family:'__pretendard_6bb8e5','__pretendard_Fallback_6bb8e5';}*{-webkit-print-color-scheme:light;color-scheme:light;box-sizing:border-box;}h1,h2,h3,h4,h5,h6{margin:0;font-weight:inherit;font-style:inherit;}a{all:unset;cursor:pointer;}ul{padding:0;}button{all:unset;cursor:pointer;}input{all:unset;box-sizing:border-box;}textarea{border:none;background-color:transparent;font-family:inherit;padding:0;outline:none;resize:none;color:inherit;}hr{width:100%;border:none;margin:0;border-top:1px solid hsl(0, 0%, 88.7%);}</style><style data-emotion="css 1q70a33">.css-1q70a33{z-index:30;position:-webkit-sticky;position:sticky;top:0;background-color:hsl(0, 0%, 97.3%);box-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05);}.css-1q70a33 .container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:3rem;margin:0 auto;}@media (min-width: 768px){.css-1q70a33 .container[data-full-width="true"]{padding-left:6rem;padding-right:6rem;}}.css-1q70a33 .container .nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:0.75rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1q70a33 .container .mid{padding-top:0.5rem;padding-bottom:0.5rem;padding-left:1.25rem;padding-right:1.25rem;border-radius:1rem;outline-style:none;width:50%;background-color:hsl(0, 0%, 93.0%);}</style><div class="py-2 css-1q70a33"><div data-full-width="false" class="container"><a aria-label="wwqdrh" class="css-0" href="/">wwqdrh</a><input class="mid" type="text" placeholder="Search Keyword..." value=""/><div class="nav"><style data-emotion="css 1nw6zn9">.css-1nw6zn9{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}.css-1nw6zn9 ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}.css-1nw6zn9 ul li{display:block;margin-left:1rem;color:hsl(0, 0%, 43.5%);}</style><div class="css-1nw6zn9"><ul><li><a target="_blank" href="https://space.bilibili.com/538676331">B站</a></li></ul></div><style data-emotion="css 1h5x3dy">.css-1h5x3dy{cursor:pointer;}</style><div class="css-1h5x3dy"><style data-emotion="css p95608">.css-p95608{font-family:'__Noto_Color_Emoji_be1378','__Noto_Color_Emoji_Fallback_be1378',Apple Color Emoji;font-weight:400;font-style:normal;}</style><span class="css-p95608">☀️</span></div></div></div></div><style data-emotion="css lomkhl">.css-lomkhl{margin:0 auto;width:100%;padding:0 3rem;}</style><main class="css-lomkhl"><div class="divide-y bg-white dark:bg-gray-700 p-6 shadow-lg rounded-lg mt-3 divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="max-w-none pt-10 pb-8 prose dark:prose-dark"><div><h2>简介</h2>
<p>基于声明式API的流水线, Tekton组件目录(Tekton Catalog)是一个社区驱动的Tekton组件的存储仓库, 任何用户可直接获取并基于此构建复杂流水线， 而无需开发</p>
<ul>
<li>自定义</li>
<li>可重用</li>
<li>可扩展性</li>
<li>标准化</li>
<li>规模化支持</li>
</ul>
<p>tekton可以完成CICD的所有工作，也可以接入argocd，让tekton专注于CI，CD则交给ArgoCD</p>
<h3>安装</h3>
<p>tekton的组件包括dashboard、tkn(cli)、trigger、interceptors</p>
<pre><code class="hljs language-Shell"><span class="hljs-meta"># dashboard</span>
kubectl apply --filename https:<span class="hljs-comment">//github.com/tektoncd/dashboard/releases/latest/download/tekton-dashboard-release.yaml</span>

<span class="hljs-meta"># tkn</span>
# 需要在github中下载release
wget https:<span class="hljs-comment">//github.com/tektoncd/cli/releases/download/v0.23.1/tkn_0.23.1_Linux_x86_64.tar.gz</span>

tar -zxvf tkn_0<span class="hljs-number">.23</span><span class="hljs-number">.1</span>_Linux_x86_64.tar.gz

mv … /usr/local/bin/tkn # 移动到指定的bin目录下

<span class="hljs-meta"># trigger</span>
kubectl apply -f https:<span class="hljs-comment">//storage.googleapis.com/tekton-releases/triggers/previous/v0.13.0/release.yaml </span>

kubectl apply -f https:<span class="hljs-comment">//storage.googleapis.com/tekton-releases/triggers/previous/v0.13.0/interceptors.yaml </span>
</code></pre><p>配置用户角色</p>
<pre><code class="hljs language-Shell">kubectl apply -f <span class="hljs-attr">https</span>:<span class="hljs-comment">//raw.githubusercontent.com/arthurk/tekton-triggers-example/master/01-rbac.yaml</span>
</code></pre><h2>核心资源对象</h2>
<h3>流水线</h3>
<img src="/images/blogs/%E6%B5%81%E6%B0%B4%E7%BA%BF.png" />

<ul>
<li>Task：Tekton中的最小单元，代表一个任务模板，包括多个步骤。每一个操作定义为Task中的一个step</li>
<li>Pipeline：多个 Task 组成的有向无环图，定义了流水线的模板</li>
<li>PipelineRun：Pipeline 真正执行时需要定义一个PipelineRun，作为流水线的实例，生成一条流水线记录</li>
<li>TaskRun：Task 真正执行的实例，记录任务状态。一个TaskRun 会创建一个对应的 Pod，每个 step 对应 pod 中的一个 container</li>
<li>PipelineResource（beta1版本后不再使用）：流水线执行过程中需要的资源信息</li>
</ul>
<h3>事件监听</h3>
<img src="/images/blogs/%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91.png" />

<ul>
<li>EventListener：监听器，提供http接口外部事件入口 ，以便于外部事件推送，比如配置Gitlab的Webhook。</li>
<li>Trigger：指定当EventListener检测到事件发生时会发生什么，它会定义TriggerBinding、TriggerTemplate以及可选的Interceptor。</li>
<li>TriggerTemplate：用于模板化资源，根据传入的参数实例化Tekton对象资源，比如TaskRun、PipelineRun等。</li>
<li>TriggerBinding：用于捕获事件中的字段并将其存储为参数，然后会将参数传递给TriggerTemplate。</li>
<li>ClusterTriggerBinding：和TriggerBinding相似，用于提取事件字段，不过它是集群级别的对象。</li>
<li>Interceptor：拦截器，在TriggerBinding之前运行，用于负载过滤、验证、转换等处理，只有通过拦截器的数据才会传递给TriggerBinding。</li>
</ul>
<h2>使用示例</h2>
<h3>纯tekton</h3>
<p>可以编写task，直接使用taskrun运行；或者使用template编排多个task, 定义了pipeline之后再定义pipelinerun进行执行</p>
<pre><code class="hljs language-yaml"><span class="hljs-string">---task</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">tekton.dev/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Task</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">tekton-test</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">ubuntu</span>
      <span class="hljs-attr">command:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">echo</span>
      <span class="hljs-attr">args:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;Hello World!&quot;</span>


<span class="hljs-string">---taskrun</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">tekton.dev/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">TaskRun</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">tekton-test</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">hello-task-run</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">taskRef:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span>

<span class="hljs-string">---pipeline</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">tekton.dev/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Pipeline</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">hello-goodbye</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">tekton-test</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span>
      <span class="hljs-attr">taskRef:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">hello</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">goodbye</span>
      <span class="hljs-attr">runAfter:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">hello</span>
      <span class="hljs-attr">taskRef:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">goodbye</span>

<span class="hljs-string">----pipelinerun</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">tekton.dev/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PipelineRun</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">hello-goodbye-run</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">tekton-test</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">pipelineRef:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">hello-goodbye</span>
</code></pre><h3>tekton+argocd</h3>
<img src="/images/blogs/tekton%2Bargocd.png" />

<ul>
<li>新建应用编排配置仓库</li>
<li>argocd监控配置仓库</li>
<li>使用tekton构建工作流</li>
<li>构建镜像，推送至镜像仓库，修改配置仓库</li>
<li>argocd监听到配置仓库更改，开始应用部署的流程</li>
</ul>
</div></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"\u003ch2\u003e简介\u003c/h2\u003e\n\u003cp\u003e基于声明式API的流水线, Tekton组件目录(Tekton Catalog)是一个社区驱动的Tekton组件的存储仓库, 任何用户可直接获取并基于此构建复杂流水线， 而无需开发\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e自定义\u003c/li\u003e\n\u003cli\u003e可重用\u003c/li\u003e\n\u003cli\u003e可扩展性\u003c/li\u003e\n\u003cli\u003e标准化\u003c/li\u003e\n\u003cli\u003e规模化支持\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003etekton可以完成CICD的所有工作，也可以接入argocd，让tekton专注于CI，CD则交给ArgoCD\u003c/p\u003e\n\u003ch3\u003e安装\u003c/h3\u003e\n\u003cp\u003etekton的组件包括dashboard、tkn(cli)、trigger、interceptors\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-Shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e# dashboard\u003c/span\u003e\nkubectl apply --filename https:\u003cspan class=\"hljs-comment\"\u003e//github.com/tektoncd/dashboard/releases/latest/download/tekton-dashboard-release.yaml\u003c/span\u003e\n\n\u003cspan class=\"hljs-meta\"\u003e# tkn\u003c/span\u003e\n# 需要在github中下载release\nwget https:\u003cspan class=\"hljs-comment\"\u003e//github.com/tektoncd/cli/releases/download/v0.23.1/tkn_0.23.1_Linux_x86_64.tar.gz\u003c/span\u003e\n\ntar -zxvf tkn_0\u003cspan class=\"hljs-number\"\u003e.23\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e_Linux_x86_64.tar.gz\n\nmv … /usr/local/bin/tkn # 移动到指定的bin目录下\n\n\u003cspan class=\"hljs-meta\"\u003e# trigger\u003c/span\u003e\nkubectl apply -f https:\u003cspan class=\"hljs-comment\"\u003e//storage.googleapis.com/tekton-releases/triggers/previous/v0.13.0/release.yaml \u003c/span\u003e\n\nkubectl apply -f https:\u003cspan class=\"hljs-comment\"\u003e//storage.googleapis.com/tekton-releases/triggers/previous/v0.13.0/interceptors.yaml \u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e配置用户角色\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-Shell\"\u003ekubectl apply -f \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//raw.githubusercontent.com/arthurk/tekton-triggers-example/master/01-rbac.yaml\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003e核心资源对象\u003c/h2\u003e\n\u003ch3\u003e流水线\u003c/h3\u003e\n\u003cimg src=\"/images/blogs/%E6%B5%81%E6%B0%B4%E7%BA%BF.png\" /\u003e\n\n\u003cul\u003e\n\u003cli\u003eTask：Tekton中的最小单元，代表一个任务模板，包括多个步骤。每一个操作定义为Task中的一个step\u003c/li\u003e\n\u003cli\u003ePipeline：多个 Task 组成的有向无环图，定义了流水线的模板\u003c/li\u003e\n\u003cli\u003ePipelineRun：Pipeline 真正执行时需要定义一个PipelineRun，作为流水线的实例，生成一条流水线记录\u003c/li\u003e\n\u003cli\u003eTaskRun：Task 真正执行的实例，记录任务状态。一个TaskRun 会创建一个对应的 Pod，每个 step 对应 pod 中的一个 container\u003c/li\u003e\n\u003cli\u003ePipelineResource（beta1版本后不再使用）：流水线执行过程中需要的资源信息\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e事件监听\u003c/h3\u003e\n\u003cimg src=\"/images/blogs/%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91.png\" /\u003e\n\n\u003cul\u003e\n\u003cli\u003eEventListener：监听器，提供http接口外部事件入口 ，以便于外部事件推送，比如配置Gitlab的Webhook。\u003c/li\u003e\n\u003cli\u003eTrigger：指定当EventListener检测到事件发生时会发生什么，它会定义TriggerBinding、TriggerTemplate以及可选的Interceptor。\u003c/li\u003e\n\u003cli\u003eTriggerTemplate：用于模板化资源，根据传入的参数实例化Tekton对象资源，比如TaskRun、PipelineRun等。\u003c/li\u003e\n\u003cli\u003eTriggerBinding：用于捕获事件中的字段并将其存储为参数，然后会将参数传递给TriggerTemplate。\u003c/li\u003e\n\u003cli\u003eClusterTriggerBinding：和TriggerBinding相似，用于提取事件字段，不过它是集群级别的对象。\u003c/li\u003e\n\u003cli\u003eInterceptor：拦截器，在TriggerBinding之前运行，用于负载过滤、验证、转换等处理，只有通过拦截器的数据才会传递给TriggerBinding。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e使用示例\u003c/h2\u003e\n\u003ch3\u003e纯tekton\u003c/h3\u003e\n\u003cp\u003e可以编写task，直接使用taskrun运行；或者使用template编排多个task, 定义了pipeline之后再定义pipelinerun进行执行\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-string\"\u003e---task\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton.dev/v1beta1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTask\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003enamespace:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton-test\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003esteps:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eubuntu\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eecho\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eargs:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello World!\u0026quot;\u003c/span\u003e\n\n\n\u003cspan class=\"hljs-string\"\u003e---taskrun\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton.dev/v1beta1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eTaskRun\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003enamespace:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton-test\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello-task-run\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003etaskRef:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e---pipeline\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton.dev/v1beta1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePipeline\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello-goodbye\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003enamespace:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton-test\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003etasks:\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etaskRef:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n    \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003egoodbye\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003erunAfter:\u003c/span\u003e\n        \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003etaskRef:\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003egoodbye\u003c/span\u003e\n\n\u003cspan class=\"hljs-string\"\u003e----pipelinerun\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eapiVersion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton.dev/v1beta1\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ekind:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ePipelineRun\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003emetadata:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello-goodbye-run\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003enamespace:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003etekton-test\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003espec:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epipelineRef:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ename:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ehello-goodbye\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003etekton+argocd\u003c/h3\u003e\n\u003cimg src=\"/images/blogs/tekton%2Bargocd.png\" /\u003e\n\n\u003cul\u003e\n\u003cli\u003e新建应用编排配置仓库\u003c/li\u003e\n\u003cli\u003eargocd监控配置仓库\u003c/li\u003e\n\u003cli\u003e使用tekton构建工作流\u003c/li\u003e\n\u003cli\u003e构建镜像，推送至镜像仓库，修改配置仓库\u003c/li\u003e\n\u003cli\u003eargocd监听到配置仓库更改，开始应用部署的流程\u003c/li\u003e\n\u003c/ul\u003e\n","frontMatter":{"readingTime":{"text":"5 min read","minutes":4.235,"time":254100,"words":847},"slug":"tekton使用示例","fileName":"tekton使用示例.md","title":"tekton使用示例","date":"2022-05-20T00:00:00.000Z","tags":["实践","云原生"],"draft":false,"summary":"tekton作为云原生中的cd工具，能够轻易的做到task复用，减少重复代码编写"}},"prev":{"title":"如何使用nginx实现灰度部署","date":"2022-03-31T00:00:00.000Z","tags":["实践","云原生"],"draft":false,"summary":"灰度部署","slug":"如何使用nginx实现灰度部署"},"next":{"title":"tekton使用示例","date":"2022-06-06T00:00:00.000Z","tags":["中间件"],"draft":false,"summary":"缓存一致性的解决方法与思路","slug":"缓存一致性问题"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["tekton使用示例"]},"buildId":"qwylQn0rAYfx_DG8FLkaO","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>